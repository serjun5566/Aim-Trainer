<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Aim Trainer Multiplayer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>
    <div class="ui">
        <div>分數: <span id="score">0</span></div>
        <div>剩餘時間: <span id="timer">30</span>s</div>
        <div id="connectionStatus" style="color: #ff4757;">狀態: 未連線</div>
    </div>

    <div id="leaderboard">
        <h3>排行榜 (TOP 5)</h3>
        <ul id="leaderList"></ul>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div id="startMenu" class="menu-box">
        <h1>Aim Trainer</h1>
        <div class="menu-controls">
            <div class="input-group">
                <label>你的 ID: </label>
                <input type="text" id="myCustomId" maxlength="5" placeholder="5位代碼">
                <button onclick="reinitializePeer()">鎖定 ID</button>
            </div>
            <p>目前 ID: <strong id="currentIdDisplay" style="color: #00ff88;">取得中...</strong></p>
            <div class="input-group">
                <input type="text" id="peerIdInput" placeholder="輸入好友 ID">
                <button onclick="connectToPeer()">進入房間</button>
            </div>
        </div>
    </div>

    <div id="lobbyMenu" class="menu-box" style="display: none;">
        <h2>遊戲大廳</h2>
        <div class="lobby-players">
            <div class="player-slot">
                <p>我 (<span id="myLobbyId">---</span>)</p>
                <div id="myReadyStatus" class="status-tag">未準備</div>
            </div>
            <div class="vs-tag">VS</div>
            <div class="player-slot">
                <p>對手 (<span id="peerLobbyId">等待中...</span>)</p>
                <div id="peerReadyStatus" class="status-tag">未準備</div>
            </div>
        </div>
        <div class="lobby-controls">
            <label>靈敏度: </label>
            <input type="range" id="sensRange" min="0.1" max="5" step="0.1" value="1">
            <span id="sensValue">1.0</span>
            <br><br>
            <button id="readyBtn" onclick="pressReady()">準備遊戲</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>